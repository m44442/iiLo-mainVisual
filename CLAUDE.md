# CLAUDE.md - プロジェクトルール

## 🚨 絶対守るべきルール

- 全て日本語で答えること

### 🔒 **CRITICAL: 動作しているコードの保護**
- **動作しているコードは絶対に変更してはいけない**
- 既存の動作を「改善」や「最適化」の名目で変更することを厳禁する
- 機能追加時は既存コードに影響を与えない方法で実装する
- 変更前に必ずgit履歴で以前の動作状態を確認する
- 複雑なstate管理やprops追加で既存のシンプルな構造を壊してはいけない

### 🛡️ **ParticleSystem保護ルール**
- **ParticleSystemは特に重要なコンポーネントであり、絶対に壊してはいけない**
- マウスイベント、スクロールイベントの処理を変更しない
- window.addEventListenerの実装を document.addEventListener に変更しない
- onAnimationCompleteなどの不要なpropsを追加しない
- zIndexやpointerEventsで他のコンポーネントがParticleSystemをブロックしないよう注意する

### 🚫 **禁止事項**
- 動作しているコンポーネントにpropsを追加する
- シンプルな構造を複雑なstate管理に変更する
- 既存のuseEffectやイベントハンドリングを変更する
- アニメーション完了の複雑な制御システムを導入する
- 「改善」や「最適化」を理由に動作コードを変更する

### 1. 既存デザインの保持
- **既存の表示デザインは一切変更してはいけない**
- 見た目やレイアウトを変更する前に必ず確認を取る
- 機能追加時も既存のスタイルを維持する

### 2. コンポーネント構造の維持
- 一度確立されたコンポーネント分離構造を勝手に変更しない
- タイトルのスタイル（ドット付きヘッダー vs シンプルタイトル）を統一性なく変更しない
- 既存のCSSクラス名を削除・変更する前に確認を取る
- コンポーネントの重複やコンポーネントが存在するにも関わらず、他のファイルに同じ内容の実装がされることを禁止する

### 3. アニメーションの保持
- ParticleSystemとの連携タイミングを崩さない
- ヘッダー、ヒーローテキストのアニメーションを削除しない
- 既存のアニメーション仕様を変更する前に確認を取る

### 4. 作業前の確認事項（強化版）
- **必須**: 変更前にgit logで動作していた状態を確認する
- **必須**: 既存ファイルを完全に読み込んでから編集する
- **必須**: 大きな変更前はgit statusで現在の状態を把握する
- **必須**: 動作に影響する変更は段階的に行い、各段階で動作確認する
- **必須**: 他のコンポーネントへの影響を事前に検討する

### 5. CSS変更のルール
- 新しいスタイルを追加する場合、既存のスタイルと競合しないか確認する
- CSSクラスの削除は慎重に行い、他のコンポーネントで使用されていないか確認する
- レスポンシブデザインを壊さない

### 6. ファイル操作のルール（強化版）
- **必須**: 既存ファイルの読み込みを行ってから編集する
- **必須**: ファイルの大幅な変更は段階的に行い、各段階でテストする
- **必須**: 重要な変更前はgitでバックアップを確認する
- **必須**: 変更理由が明確でない修正は行わない

### 7. 完全実装のルール
- **ユーザー仕様を完全に実装する**
- 中途半端な実装や画面外への配置は絶対に行わない
- 要素の位置、サイズ、色、レイアウトは仕様通りに正確に実装する
- 「とりあえず動く」ではなく「完全に正しく動く」ことを最優先にする
- 一度で完璧に実装できない理由はない - 最初から完全に実装する

## 📋 現在のプロジェクト構造

### メインコンポーネント
- `iiLoCorporateSite.tsx` - メインコンポーネント（各セクションをインポート）
- `HeroSection.tsx` - ヒーローセクション（アニメーション付き）
- `MissionSectionWithAnimation.tsx` - ミッションセクション（IILO 5段階アニメーション）
- `ServiceSectionDiiLo.tsx` - サービスセクション
- `RecruitSectionNew.tsx` - リクルートセクション
- `CompanySectionNew.tsx` - 会社概要セクション
- `NewsSectionNew.tsx` - ニュースセクション
- `ContactSection.tsx` - コンタクトセクション
- `Header.tsx` - ヘッダー（ハンバーガーメニュー、アニメーション付き）
- `Footer.tsx` - フッター

### スタイルファイル
- `IiLoCorporateSite.module.css` - メインCSSファイル
- `Header.module.css` - ヘッダー専用CSS
- `ContactSection.module.css` - コンタクトセクション専用CSS

### アニメーション仕様
- ParticleSystemは2.5秒で完了
- ヘッダーアニメーションは2.8秒後に開始
- ヒーローテキストアニメーションは3.0秒後に開始
- ハンバーガーメニューのアニメーション時間は0.1s

## 🔧 推奨コマンド

### テスト・ビルドコマンド
- 開発サーバー: `npm run dev`
- ビルド: `npm run build`
- リント: `npm run lint`
- 型チェック: `npm run typecheck`

### Git操作
- 現在の状態確認: `git status`
- 変更の確認: `git diff`
- 前の状態に戻す: `git checkout HEAD -- <filename>`

## ⚠️ 注意事項

### やってはいけないこと
- 動作しているアニメーションやスタイルを「改善」のために変更する
- ユーザーの確認なしにタイトルスタイルを変更する（ドット付き ⇔ シンプル）
- 既存のCSSクラスを削除する
- コンポーネントの分離構造を変更する
- 中途半端な実装をする（画面外配置、サイズ不正確など）
- **SPとPCのレスポンシブデザインルール**: SPデザインを修正する際はPCデザインを変更してはいけない。PCデザインを修正する際はSPデザインを変更してはいけない。メディアクエリで分離されているスタイルは独立して扱う

### やるべきこと
- 変更前に必ず現状を確認する
- 段階的に変更を行う
- ユーザーの指示を正確に理解してから作業する
- 既存の動作を保持しながら新機能を追加する

## 📝 更新履歴
- 2025-06-16: 初版作成 - コンポーネント分離後のルール策定